<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iOS Settings Prototype</title>
    <style>
        /* General Styles */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f2f2f7;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        /* Status Bar */
        .status-bar {
            position: sticky;
            top: 0;
            background: #fff;
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 3;
        }

        /* Header */
        header {
            background: #fff;
            padding: 10px;
            text-align: center;
        }

        /* Search */
        .search-container {
            margin: 10px 0;
        }

        .search-bar {
            width: 90%;
            padding: 10px;
            border-radius: 10px;
            border: none;
            background: #e0e0e0;
        }

        .search-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
            z-index: 20;
            display: none;
        }

        .search-results {
            position: absolute;
            top: 100px;
            width: 90%;
            left: 5%;
            background: #fff;
            border-radius: 10px;
            z-index: 30;
            max-height: 70vh;
            overflow-y: auto;
            display: none;
        }

        /* Profile */
        .profile-section {
            background: #fff;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            border-radius: 10px;
        }

        .profile-icon {
            width: 50px;
            height: 50px;
            background: #ccc;
            border-radius: 50%;
            margin-right: 10px;
        }

        /* Content Container */
        .content-container {
            transition: filter 0.1s ease; /* Smooth brightness transition */
        }

        /* Pinned Section */
        .pinned-section {
            background: #fff;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            position: sticky;
            top: 40px;
            z-index: 2;
            display: flex;
            justify-content: space-around;
        }

        .connectivity-button {
            text-align: center;
            border: none;
            background: none;
            cursor: pointer;
        }

        .connectivity-icon {
            width: 40px;
            height: 40px;
            background: #c7c7cc;
            border-radius: 50%;
        }

        .connectivity-icon.active {
            background: #007aff;
        }

        .connectivity-label {
            display: block;
            font-size: 12px;
            margin-top: 5px;
        }

        /* Sections */
        .section-header {
            background: #fff;
            padding: 10px;
            margin: 10px 0 0;
            border-radius: 10px 10px 0 0;
            cursor: default;
        }

        .section-header[data-collapse-target] {
            cursor: pointer;
        }

        .section-header .collapse-arrow {
            float: right;
        }

        .section {
            background: #fff;
            padding: 0 10px 10px;
            margin: 0 0 10px;
            border-radius: 0 0 10px 10px;
        }

        .section-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e0e0e0;
            cursor: pointer;
        }

        .section-item:last-child {
            border-bottom: none;
        }

        .left-content {
            display: flex;
            align-items: center;
        }

        .item-icon {
            width: 30px;
            height: 30px;
            background: #ccc;
            border-radius: 50%;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .item-icon img {
            width: 20px;
            height: 20px;
        }

        .toggle-switch {
            width: 50px;
            height: 30px;
            background: #ccc;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: #fff;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.2s;
        }

        .toggle-switch.active {
            background: #34c759;
        }

        .toggle-switch.active::after {
            transform: translateX(20px);
        }

        .brightness-controls {
            width: 150px;
        }

        .brightness-range {
            width: 100%;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: #fff;
            padding: 10px 20px;
            border-radius: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Search Overlay -->
        <div class="search-overlay"></div>
        
        <!-- Status Bar -->
        <div class="status-bar">
            <img src="wifi.png" alt="Wi-Fi Status" style="display: inline;">
            <img src="lte.png" alt="LTE Status" style="display: inline;">
            <span class="time">9:41</span>
            <img src="battery.png" alt="Battery Status">
        </div>

        <!-- Header with Search -->
        <header>
            <h1>Settings</h1>
            <div class="search-container">
                <input type="text" class="search-bar" placeholder="Search">
            </div>
        </header>

        <!-- Profile Section -->
        <div class="profile-section">
            <div class="profile-icon"></div>
            <div class="profile-info">
                <h2>User Name</h2>
                <p>Apple ID, iCloud, Media & Purchases</p>
            </div>
        </div>

        <!-- Content Container -->
        <div class="content-container">
            <!-- Pinned Section Title -->
            <div class="section-header">Pinned</div>
            
            <!-- Pinned Connectivity Controls -->
            <div class="pinned-section">
                <button class="connectivity-button" data-setting-id="wifi">
                    <div class="connectivity-icon icon-wifi active"></div>
                    <span class="connectivity-label">Wi-Fi</span>
                </button>
                <button class="connectivity-button" data-setting-id="bluetooth">
                    <div class="connectivity-icon icon-bluetooth"></div>
                    <span class="connectivity-label">Bluetooth</span>
                </button>
                <button class="connectivity-button" data-setting-id="airplane">
                    <div class="connectivity-icon icon-airplane"></div>
                    <span class="connectivity-label">Airplane Mode</span>
                </button>
                <button class="connectivity-button" data-setting-id="cellular">
                    <div class="connectivity-icon icon-cellular active"></div>
                    <span class="connectivity-label">Cellular</span>
                </button>
            </div>

            <!-- Recently Used Section -->
            <div class="section-header" data-collapse-target="recentlyUsed">Recently Used</div>
            <div class="section" id="recentlyUsed">
                <div class="section-item" tabindex="0" data-setting-id="display-brightness">
                    <div class="left-content">
                        <div class="item-icon icon-display">
                            <img src="sun.png" alt="Display Brightness Icon">
                        </div>
                        <div class="item-name">Display Brightness</div>
                    </div>
                    <div class="right-content brightness-controls">
                        <input type="range" class="brightness-range" min="0" max="100" value="50">
                    </div>
                </div>
            </div>

            <!-- Connections Section -->
            <div class="section-header" data-collapse-target="connectionsSection">Connections</div>
            <div class="section" id="connectionsSection">
                <div class="section-item" tabindex="0" data-setting-id="wifi">
                    <div class="left-content">
                        <div class="item-icon icon-wifi">
                            <img src="wifi.png" alt="Wi-Fi Icon">
                        </div>
                        <div class="item-name">Wi-Fi</div>
                    </div>
                    <div class="right-content">
                        <div class="toggle-switch active" role="switch" aria-checked="true"></div>
                    </div>
                </div>
                <div class="section-item" tabindex="0" data-setting-id="cellular">
                    <div class="left-content">
                        <div class="item-icon icon-cellular">
                            <img src="cellular.png" alt="Cellular Icon">
                        </div>
                        <div class="item-name">Cellular</div>
                    </div>
                    <div class="right-content">
                        <div class="toggle-switch active" role="switch" aria-checked="true"></div>
                    </div>
                </div>
                <div class="section-item" tabindex="0" data-setting-id="airplane">
                    <div class="left-content">
                        <div class="item-icon icon-airplane">
                            <img src="airplane.png" alt="Airplane Mode Icon">
                        </div>
                        <div class="item-name">Airplane Mode</div>
                    </div>
                    <div class="right-content">
                        <div class="toggle-switch" role="switch" aria-checked="false"></div>
                    </div>
                </div>
            </div>

            <!-- Display & Appearance Section -->
            <div class="section-header" data-collapse-target="displayAppearance">Display & Appearance</div>
            <div class="section" id="displayAppearance">
                <div class="section-item" tabindex="0" data-setting-id="display-brightness">
                    <div class="left-content">
                        <div class="item-icon icon-display">
                            <img src="sun.png" alt="Display Brightness Icon">
                        </div>
                        <div class="item-name">Display Brightness</div>
                    </div>
                    <div class="right-content brightness-controls">
                        <input type="range" class="brightness-range" min="0" max="100" value="50">
                    </div>
                </div>
                <div class="section-item" tabindex="0" data-setting-id="auto-dim">
                    <div class="left-content">
                        <div class="item-name">Auto-Dim Display</div>
                    </div>
                    <div class="right-content">
                        <div class="toggle-switch" role="switch" aria-checked="false"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search Results -->
        <div class="search-results"></div>

        <!-- Toast Notification -->
        <div class="toast" role="alert" aria-live="polite"></div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Settings Data
            const settingsItems = [
                { id: "wifi", name: "Wi-Fi", hasToggle: true, toggleState: true },
                { id: "bluetooth", name: "Bluetooth", hasToggle: true, toggleState: false },
                { id: "airplane", name: "Airplane Mode", hasToggle: true, toggleState: false },
                { id: "cellular", name: "Cellular", hasToggle: true, toggleState: true },
                { id: "display-brightness", name: "Display Brightness", brightnessValue: 50 },
                { id: "auto-dim", name: "Auto-Dim Display", hasToggle: true, toggleState: false }
            ];

            // Sync Functions
            function syncToggles(settingId, isActive) {
                const toggles = document.querySelectorAll(`.section-item[data-setting-id="${settingId}"] .toggle-switch`);
                toggles.forEach(toggle => {
                    toggle.classList.toggle('active', isActive);
                    toggle.setAttribute('aria-checked', isActive ? 'true' : 'false');
                });
                const pinnedIcon = document.querySelector(`.connectivity-button[data-setting-id="${settingId}"] .connectivity-icon`);
                if (pinnedIcon) {
                    pinnedIcon.classList.toggle('active', isActive);
                }
                if (settingId === "wifi") {
                    document.querySelector('.status-bar img[alt="Wi-Fi Status"]').style.display = isActive ? 'inline' : 'none';
                }
                if (settingId === "cellular") {
                    document.querySelector('.status-bar img[alt="LTE Status"]').style.display = isActive ? 'inline' : 'none';
                }
            }

            function syncBrightnessSliders(value) {
                const sliders = document.querySelectorAll(`.section-item[data-setting-id="display-brightness"] .brightness-range`);
                sliders.forEach(slider => slider.value = value);
                setBrightness(value);
            }

            function setBrightness(value) {
                const content = document.querySelector('.content-container');
                if (content) {
                    const brightness = value / 100; // 0 to 1
                    content.style.filter = `brightness(${brightness})`;
                }
            }

            // Initial Sync
            settingsItems.forEach(item => {
                if (item.hasToggle) {
                    syncToggles(item.id, item.toggleState);
                }
                if (item.id === "display-brightness") {
                    syncBrightnessSliders(item.brightnessValue);
                }
            });

            // Toggle Handlers
            document.querySelectorAll('.section-item .toggle-switch').forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const itemRow = this.closest('.section-item');
                    const settingId = itemRow.getAttribute('data-setting-id');
                    const settingData = settingsItems.find(i => i.id === settingId);
                    if (settingData) {
                        const isActive = !settingData.toggleState;
                        settingData.toggleState = isActive;
                        syncToggles(settingId, isActive);
                        showToast(`${settingData.name} ${isActive ? 'On' : 'Off'}`);
                        if (settingId === "airplane") {
                            if (isActive) turnOnAirplane();
                            else turnOffAirplane();
                        } else if (isActive && settingsItems.find(a => a.id === "airplane").toggleState) {
                            turnOffAirplane();
                        }
                    }
                    if (navigator.vibrate) navigator.vibrate(5);
                });
            });

            document.querySelectorAll('.connectivity-button').forEach(button => {
                button.addEventListener('click', function() {
                    const settingId = this.getAttribute('data-setting-id');
                    const settingData = settingsItems.find(i => i.id === settingId);
                    if (settingData) {
                        const isActive = !settingData.toggleState;
                        settingData.toggleState = isActive;
                        syncToggles(settingId, isActive);
                        const label = this.querySelector('.connectivity-label').textContent;
                        showToast(`${label} ${isActive ? 'On' : 'Off'}`);
                        if (settingId === "airplane") {
                            if (isActive) turnOnAirplane();
                            else turnOffAirplane();
                        } else if (isActive && settingsItems.find(a => a.id === "airplane").toggleState) {
                            turnOffAirplane();
                        }
                    }
                    if (navigator.vibrate) navigator.vibrate(5);
                });
            });

            // Brightness Slider Handlers
            document.querySelectorAll('.brightness-range').forEach(slider => {
                slider.addEventListener('input', function() {
                    const newVal = parseInt(this.value, 10);
                    const brightnessItem = settingsItems.find(i => i.id === "display-brightness");
                    if (brightnessItem) {
                        brightnessItem.brightnessValue = newVal;
                        syncBrightnessSliders(newVal);
                    }
                });
            });

            // Airplane Mode Logic
            function turnOnAirplane() {
                const airplaneItem = settingsItems.find(s => s.id === "airplane");
                if (airplaneItem) {
                    airplaneItem.toggleState = true;
                    syncToggles("airplane", true);
                }
                ["wifi", "bluetooth", "cellular"].forEach(id => {
                    const settingItem = settingsItems.find(s => s.id === id);
                    if (settingItem && settingItem.toggleState) {
                        settingItem.toggleState = false;
                        syncToggles(id, false);
                        showToast(`${settingItem.name} Off`);
                    }
                });
                showToast("Airplane Mode On");
            }

            function turnOffAirplane() {
                const airplaneItem = settingsItems.find(s => s.id === "airplane");
                if (airplaneItem) {
                    airplaneItem.toggleState = false;
                    syncToggles("airplane", false);
                }
                showToast("Airplane Mode Off");
            }

            // Search Functionality
            const searchBar = document.querySelector('.search-bar');
            const searchOverlay = document.querySelector('.search-overlay');
            const searchResults = document.querySelector('.search-results');

            searchBar.addEventListener('focus', function() {
                searchOverlay.style.display = 'block';
                searchResults.style.display = 'block';
                performSearch();
            });

            searchOverlay.addEventListener('click', function() {
                searchOverlay.style.display = 'none';
                searchResults.style.display = 'none';
                searchBar.value = '';
                searchBar.blur();
            });

            searchBar.addEventListener('input', performSearch);

            function performSearch() {
                const query = searchBar.value.toLowerCase();
                searchResults.innerHTML = '';
                if (query) {
                    const filteredItems = settingsItems.filter(item => item.name.toLowerCase().includes(query));
                    filteredItems.forEach(item => {
                        const resultItem = document.createElement('div');
                        resultItem.className = 'section-item';
                        resultItem.setAttribute('data-setting-id', item.id);
                        resultItem.innerHTML = `
                            <div class="left-content">
                                <div class="item-icon icon-${item.id}"></div>
                                <div class="item-name">${item.name}</div>
                            </div>
                            <div class="right-content">
                                ${item.hasToggle ? '<div class="toggle-switch" role="switch"></div>' : 
                                  item.id === "display-brightness" ? '<input type="range" class="search-brightness-range" min="0" max="100">' : ''}
                            </div>
                        `;
                        searchResults.appendChild(resultItem);

                        if (item.hasToggle) {
                            const toggle = resultItem.querySelector('.toggle-switch');
                            toggle.classList.toggle('active', item.toggleState);
                            toggle.setAttribute('aria-checked', item.toggleState ? 'true' : 'false');
                            toggle.addEventListener('click', function(e) {
                                e.stopPropagation();
                                const isActive = !item.toggleState;
                                item.toggleState = isActive;
                                syncToggles(item.id, isActive);
                                showToast(`${item.name} ${isActive ? 'On' : 'Off'}`);
                                if (item.id === "airplane") {
                                    if (isActive) turnOnAirplane();
                                    else turnOffAirplane();
                                } else if (isActive && settingsItems.find(a => a.id === "airplane").toggleState) {
                                    turnOffAirplane();
                                }
                                if (navigator.vibrate) navigator.vibrate(5);
                            });
                        } else if (item.id === "display-brightness") {
                            const slider = resultItem.querySelector('.search-brightness-range');
                            slider.value = item.brightnessValue;
                            slider.addEventListener('input', function(e) {
                                e.stopPropagation();
                                const newVal = parseInt(this.value, 10);
                                item.brightnessValue = newVal;
                                syncBrightnessSliders(newVal);
                            });
                        }
                    });
                }
            }

            // Collapsible Sections
            document.querySelectorAll('.section-header[data-collapse-target]').forEach(header => {
                header.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-collapse-target');
                    const targetSection = document.getElementById(targetId);
                    targetSection.style.display = targetSection.style.display === 'none' ? 'block' : 'none';
                });
            });

            // Toast Notification
            function showToast(message) {
                const toast = document.querySelector('.toast');
                toast.textContent = message;
                toast.style.display = 'block';
                setTimeout(() => toast.style.display = 'none', 2000);
            }
        });
    </script>
</body>
</html>
